
- [第1章](#第1章)
  - [存储单元](#存储单元)
  - [寄存器](#寄存器)
  - [CPU](#cpu)
  - [DOS使用](#dos使用)

  
------

## 第1章

### 存储单元

总线分成三部分；地址总线，数据总线，控制总线

一个 CPU 有 N 根地址线，也就是地址总线的宽度为 N，这样的 CPU 的寻址能力是 2<sup>N</sup>，也就是可以寻找 2 的 N 次方个内存单元。

8086 数据总线有 16 为数据线，那么一次可以传 16 位数据（16 个二进制），同样的数据给 8088 数据总线，有 8 为数据线，那么一次可以传 8 为数据，就需要写两次。

> 一个 CPU 的寻址能力为 8KB ，那么它的地址总线宽度为 13，因为 8kb = 8*1024B = 2<sup>13</sup>


### 寄存器

8086 CPU 所有的寄存器都是 16 为寄存器，可以存储 16 为数据。可以分为两位 8 位寄存器。

> 另外 16 为寄存器只能存 4 为十六进制，8 位寄存器只能存放 2 位十六进制

> ah 和 al 是两个不相关的寄存器，al 不能进位到 ah，除非写成 add ax 93H，这样 CPU 就会认为这条指令只有一个 16 位寄存器

用汇编语言实现 2 的 4 次方

```
mov ax 2
add ax ax
add ax ax
add ax ax
```

### CPU 

8086 CPU 有 20 位地址总线，可以传送 20 位地址，达到 1MB 寻址能力，8086 CPU 又是 16 位结构，内部一次性处理、传输、暂存的地址为 16 位。所以它的寻址能力为 2<sup>16</sup>= 64 KB。所以 CPU 内部需要采用两个 16 位的地址合成一个 20 位的物理地址。这种方式就是：**段基地址x16 + 偏移地址 = 物理地址**。

段地址 x 16 必然是 16 的倍数，偏移地址为 16 位，16 位的寻址能力为 64KB，所以一个段的最大长度为 64KB。

>16 位 段地址 和 16 位偏移地址送入【地址加法器】合成 20 位的物理地址

**指令的执行过程** P30-32

### DOS使用

打开 dosbox

挂载磁盘

```
mount d d:/dos
c:
dir
```

将 masm 文件夹下的文件拷贝到 `d:/dos` 后就可以使用 debug 了

```
debug
q   ;退出
```

使用 debug 调试程序

```
masm p4-1;
link p4-1.obj;
debug p4-2.exe
```

命令

- R - 查看寄存器内容
- R 寄存器名 - 改变指定寄存器内容
- 用D命令查看内存中的内容
  - D - 列出预设地址内存处的
  - D 段地址:偏移地址 - 列出内存中指定地址处的内容
- 用E命令改变内存中的内容
  - E 段地址:偏移地址 数据1 数据2 ...
-  t - 执行CS:IP处的指令
-  u 地址 - 查看代码
-  g 执行编译

  















