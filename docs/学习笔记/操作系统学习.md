

----------------

# 操作系统真象还原

## 第 0 章

### 内存为什么要分段

内存是随机读写设备，就是访问内存任何一处不需要从头开始，只需要给出其地址就可以了。

分段是 CPU 访问内存的一种方式

CPU 采用 段基址+段内偏移 的形式访问内存，这样可以访问任意内存，这样的好处是程序可以重新定位了，可以同时运行两个应用程序。

> 什么是重定位呢？      
> 简单的说就是将程序中指令的地址改写成另一个地址，但是这个地址的内容还是原来地址的内容。

CPU 采用这种方式访问内存，就需要专门的 段基址寄存器， 段基址 + 段内偏移 就是物理地址了。

所以只要程序分了段，把整个段移到任何位置，段内的地址相对于段基地址是不变的，所以无论基地址是多少，只要给出段内便宜，CPU 就能找到正确的指令执行。

分段的作用就是将大内存分成可以访问的小段，这样就可以访问到所有内存了。