

学习并总结这里的博客，写成自己的博客然后发布到网络。
http://www.embeddedlinux.org.cn/emb-linux/kernel-driver/

USB开发大全
ARM64编程

-----


# USB 开发大全

## USB 传输

- 主机负责总线上的传输
- 设备响应来自主机的通信

USB 传输的一个完整过程就是**事务**。由若干个令牌包和数据包构成。事务在主机和设备之间传输，在主机发出一个令牌包后，设备将根据令牌包的内容回复一个或多个数据包，然后主机再发出一个完成包来结束事务。


- 端点（endpoint）：是**设备的缓冲区**，用于接收或发送数据。每个端点都有唯一的地址，并且按照其所支持的传输类型进行分类，例如批量传输、中断传输和等时传输等。对于每个端点，必须指定其方向（输入或输出），以及它所属的接口号等信息。

- 令牌包（token packet）：USB 数据传输的基本单位，用于控制数据传输的开始、结束和方向。在 USB 传输中，有两种主要类型的令牌包：IN 和 OUT 。IN 令牌包由主机发送到设备来请求设备传输数据（设备 --> 数据），OUT 令牌包则由主机发送到设备来指示设备接收数据（设备 <-- 数据）。令牌包还包括目标端点地址、数据包的数量、数据包大小等信息。